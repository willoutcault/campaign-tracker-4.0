
{% extends "base.html" %}
{% block content %}
<h3 class="mb-1">Contract: {{ contract.name }}</h3>
<p class="text-muted mb-2">
  Pharma: <strong>{{ contract.pharma.name }}</strong> ·
  Brands: {{ contract.brands | map(attribute='name') | list | join(', ') }}
</p>

<!-- Full contract info -->
<div class="row g-3 mb-4">
  <div class="col-md-2"><div class="small text-muted">Contract #</div><div>{{ contract.contract_number or '—' }}</div></div>
  <div class="col-md-2"><div class="small text-muted">Status</div><div>{{ contract.status or '—' }}</div></div>
  <div class="col-md-2"><div class="small text-muted">Budget Total</div><div>{{ contract.budget_total if contract.budget_total is not none else '—' }}</div></div>
  <div class="col-md-2"><div class="small text-muted">Billing Terms</div><div>{{ contract.billing_terms or '—' }}</div></div>
  <div class="col-md-2"><div class="small text-muted">Signed</div><div>{{ contract.signed_date or '—' }}</div></div>
  <div class="col-md-2"><div class="small text-muted">Window</div><div>{{ contract.start_date or '—' }} → {{ contract.end_date or '—' }}</div></div>
  {% if contract.notes %}
  <div class="col-12"><div class="small text-muted">Notes</div><div class="border rounded p-2 bg-light">{{ contract.notes }}</div></div>
  {% endif %}
</div>

<!-- Campaigns accordion with improved table and inline placement edit via modal -->
<div class="card shadow-sm">
  <div class="card-body">
    <h5 class="card-title mb-3">Campaigns, Programs & Placements</h5>

    {% if campaigns %}
      <div class="accordion" id="campaignsAcc">
        {% for c in campaigns %}
        {% set collapse_id = 'collapse-' ~ c.id %}
        {% set heading_id = 'heading-' ~ c.id %}
        <div class="accordion-item">
          <h2 class="accordion-header" id="{{ heading_id }}">
            <button class="accordion-button collapsed" type="button"
                    data-bs-toggle="collapse" data-bs-target="#{{ collapse_id }}"
                    aria-expanded="false" aria-controls="{{ collapse_id }}">
              <div class="w-100 d-flex justify-content-between align-items-center">
                <div>
                  <strong>{{ c.name }}</strong>
                  {% if c.status %}<span class="badge bg-secondary ms-2">{{ c.status }}</span>{% endif %}
                  {% if c.start_date or c.end_date %}
                    <small class="text-muted ms-2">{{ c.start_date or '—' }} → {{ c.end_date or '—' }}</small>
                  {% endif %}
                </div>
                <a class="btn btn-outline-secondary btn-sm" href="{{ url_for('campaigns.edit_campaign', campaign_id=c.id) }}" style="margin-right: 10px;">Edit</a>
              </div>
            </button>
          </h2>
          <div id="{{ collapse_id }}" class="accordion-collapse collapse" aria-labelledby="{{ heading_id }}" data-bs-parent="#campaignsAcc">
            <div class="accordion-body">
              {% set programs = programs_by_campaign.get(c.id, []) %}
              {% if programs %}
                <table class="table table-sm align-middle">
                  <thead class="table-light">
                    <tr>
                      <th style="width:20%">Program</th>
                      <th style="width:20%">Target List</th>
                      <th style="width:42%">Placements</th>
                      <th style="width:10%">Status</th>
                      <th style="width:8%"></th>
                    </tr>
                  </thead>
                  <tbody>
                  {% for p in programs %}
                    <tr>
                      <td>
                        <div class="fw-semibold">{{ p.name }}</div>
                        {% if p.start_date or p.end_date %}
                          <div class="small text-muted">{{ p.start_date or '—' }} → {{ p.end_date or '—' }}</div>
                        {% endif %}
                      </td>
                      <td>{{ p.target_list.label if p.target_list else '' }}</td>
                      <td>
                        {% if p.placements %}
                          <div class="d-flex flex-wrap gap-2">
                          {% for pl in p.placements %}
                            <span class="badge bg-info text-dark" data-bs-toggle="modal" data-bs-target="#editPlModal-{{ pl.id }}" style="cursor:pointer" title="Edit placement">
                              {{ pl.name }}
                              {% if pl.channel %}<span class="ms-1">· {{ pl.channel }}</span>{% endif %}
                              {% if pl.status %}<span class="ms-1">· {{ pl.status }}</span>{% endif %}
                            </span>

                            <!-- Edit Placement Modal -->
                            <div class="modal fade" id="editPlModal-{{ pl.id }}" tabindex="-1" aria-hidden="true">
                              <div class="modal-dialog modal-lg modal-dialog-scrollable">
                                <div class="modal-content">
                                  <form method="post" action="{{ url_for('placements.edit_placement', placement_id=pl.id) }}">
                                    <div class="modal-header">
                                      <h5 class="modal-title">Edit Placement: {{ pl.name }}</h5>
                                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                      <input type="hidden" name="next" value="{{ url_for('contracts.view_contract', contract_id=contract.id) }}">
                                      <div class="row g-3">
                                        <div class="col-md-6">
                                          <label class="form-label">Name</label>
                                          <input class="form-control" type="text" name="name" value="{{ pl.name }}" required>
                                        </div>
                                        <div class="col-md-6">
                                          <label class="form-label">Placement Code</label>
                                          <input class="form-control" type="text" name="placement_code" value="{{ pl.placement_code or '' }}">
                                        </div>
                                        <div class="col-md-6">
                                          <label class="form-label">Programs (multi-select)</label>
                                          {% set sel_ids = pl.programs | map(attribute='id') | list %}
                                          <select class="form-select" name="program_ids" multiple size="6" required>
                                            {% for p2 in all_programs %}
                                            <option value="{{ p2.id }}" {% if p2.id in sel_ids %}selected{% endif %}>{{ p2.name }} ({{ p2.campaign.name }})</option>
                                            {% endfor %}
                                          </select>
                                        </div>
                                        <div class="col-md-6">
                                          <label class="form-label">Channel</label>
                                          <input class="form-control" type="text" name="channel" value="{{ pl.channel or '' }}">
                                        </div>
                                        <div class="col-md-4">
                                          <label class="form-label">Status</label>
                                          <input class="form-control" type="text" name="status" value="{{ pl.status or '' }}">
                                        </div>
                                        <div class="col-md-4">
                                          <label class="form-label">Format</label>
                                          <input class="form-control" type="text" name="format" value="{{ pl.format or '' }}">
                                        </div>
                                        <div class="col-md-4">
                                          <label class="form-label">Ad Server</label>
                                          <input class="form-control" type="text" name="ad_server" value="{{ pl.ad_server or '' }}">
                                        </div>
                                        <div class="col-md-4">
                                          <label class="form-label">Frequency Cap</label>
                                          <input class="form-control" type="number" name="frequency_cap" value="{{ pl.frequency_cap or '' }}">
                                        </div>
                                        <div class="col-md-4">
                                          <label class="form-label">Impression Goal</label>
                                          <input class="form-control" type="number" name="impression_goal" value="{{ pl.impression_goal or '' }}">
                                        </div>
                                        <div class="col-md-4">
                                          <label class="form-label">Click Goal</label>
                                          <input class="form-control" type="number" name="click_goal" value="{{ pl.click_goal or '' }}">
                                        </div>
                                        <div class="col-md-6">
                                          <label class="form-label">Start</label>
                                          <input class="form-control" type="date" name="start_date" value="{{ pl.start_date.isoformat() if pl.start_date else '' }}">
                                        </div>
                                        <div class="col-md-6">
                                          <label class="form-label">End</label>
                                          <input class="form-control" type="date" name="end_date" value="{{ pl.end_date.isoformat() if pl.end_date else '' }}">
                                        </div>
                                      </div>
                                    </div>
                                    <div class="modal-footer">
                                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                      <button class="btn btn-primary">Save Changes</button>
                                    </div>
                                  </form>
                                </div>
                              </div>
                            </div>
                            <!-- /Modal -->

                          {% endfor %}
                          </div>
                        {% else %}
                          <span class="text-muted">No placements</span>
                        {% endif %}
                      </td>
                      <td>{{ p.status or '' }}</td>
                      <td class="text-end">
                        <button class="btn btn-outline-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#editProgModal-{{ p.id }}">
                          Edit
                        </button>
                      </td>
                    </tr>
                    {# --- Edit Program Modal (filtered TLs) --- #}
                    {% set modal_id = 'editProgModal-' ~ p.id %}
                    <div class="modal fade" id="{{ modal_id }}" tabindex="-1" aria-hidden="true">
                      <div class="modal-dialog modal-lg modal-dialog-scrollable">
                        <div class="modal-content">
                          <form method="post" action="{{ url_for('programs.edit_program', program_id=p.id) }}">
                            <div class="modal-header">
                              <h5 class="modal-title">Edit Program: {{ p.name }}</h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                              <input type="hidden" name="next" value="{{ url_for('contracts.view_contract', contract_id=contract.id) }}">

                              <div class="row g-3">
                                <div class="col-md-6">
                                  <label class="form-label">Name</label>
                                  <input class="form-control" type="text" name="name" value="{{ p.name }}" required>
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label">Program Code</label>
                                  <input class="form-control" type="text" name="program_code" value="{{ p.program_code or '' }}">
                                </div>

                                <div class="col-md-6">
                                  <label class="form-label">Campaign</label>
                                  <select class="form-select" id="prog_campaign_{{ p.id }}" name="campaign_id" required>
                                    {% for c2 in campaigns %}
                                    <option value="{{ c2.id }}" {% if c2.id == p.campaign_id %}selected{% endif %}>{{ c2.name }}</option>
                                    {% endfor %}
                                  </select>
                                  <div class="form-text">Target Lists filter by the selected campaign's pharma & brand(s).</div>
                                </div>

                                <div class="col-md-6">
                                  <label class="form-label" style="margin-right: 5px;">Target List</label>
                                  <input class="form-check-input" type="checkbox" id="prog_show_all_{{ p.id }}">
                                  <label class="form-check-label" for="prog_show_all_{{ p.id }}">Show all</label>
                                  <div class="d-flex gap-2">
                                    <select class="form-select" id="prog_tl_{{ p.id }}" name="target_list_id" data-current="{{ p.target_list_id or '' }}">
                                      <option value="">(none)</option>
                                    </select>
                                  </div>
                                </div>

                                <div class="col-md-4">
                                  <label class="form-label">Start</label>
                                  <input class="form-control" type="date" name="start_date" value="{{ p.start_date.isoformat() if p.start_date else '' }}">
                                </div>
                                <div class="col-md-4">
                                  <label class="form-label">End</label>
                                  <input class="form-control" type="date" name="end_date" value="{{ p.end_date.isoformat() if p.end_date else '' }}">
                                </div>
                                <div class="col-md-4">
                                  <label class="form-label">Launch</label>
                                  <input class="form-control" type="date" name="launch_date" value="{{ p.launch_date.isoformat() if p.launch_date else '' }}">
                                </div>

                                <div class="col-md-4">
                                  <label class="form-label">Program Type</label>
                                  <input class="form-control" type="text" name="program_type" value="{{ p.program_type or '' }}">
                                </div>
                                <div class="col-md-4">
                                  <label class="form-label">Content Type</label>
                                  <input class="form-control" type="text" name="content_type" value="{{ p.content_type or '' }}">
                                </div>
                                <div class="col-md-4">
                                  <label class="form-label">Audience Segment</label>
                                  <input class="form-control" type="text" name="audience_segment" value="{{ p.audience_segment or '' }}">
                                </div>

                                <div class="col-md-6">
                                  <label class="form-label">Expected Reach</label>
                                  <input class="form-control" type="number" name="expected_reach" value="{{ p.expected_reach or '' }}">
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label">Status</label>
                                  <input class="form-control" type="text" name="status" value="{{ p.status or '' }}">
                                </div>
                                <div class="col-12">
                                  <label class="form-label">Notes</label>
                                  <input class="form-control" type="text" name="notes" value="{{ p.notes or '' }}">
                                </div>
                              </div>
                            </div>
                            <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                              <button class="btn btn-primary">Save Changes</button>
                            </div>
                          </form>
                        </div>
                      </div>
                    </div>
                    {# --- /Edit Program Modal --- #}
                  {% endfor %}
                  </tbody>
                </table>
              {% else %}
                <div class="text-muted">No programs yet.</div>
              {% endif %}
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="alert alert-info mb-0">No campaigns yet. Use the tabs above to add your first campaign.</div>
    {% endif %}
  </div>
</div>

<!-- Tabbed full forms -->
<div class="card shadow-sm" style="margin-top: 15px;">
  <div class="card-body">
    <h5 class="card-title mb-3">Add Items</h5>
    <ul class="nav nav-tabs mb-3" id="contractFormsTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="tab-campaign" data-bs-toggle="tab" data-bs-target="#pane-campaign" type="button" role="tab" aria-controls="pane-campaign" aria-selected="true">Add Campaign</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="tab-program" data-bs-toggle="tab" data-bs-target="#pane-program" type="button" role="tab" aria-controls="pane-program" aria-selected="false">Add Program</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="tab-placement" data-bs-toggle="tab" data-bs-target="#pane-placement" type="button" role="tab" aria-controls="pane-placement" aria-selected="false">Add Placement</button>
      </li>
    </ul>
    <div class="tab-content mb-4" id="contractFormsTabContent">
      <!-- Campaign full form -->
      <div class="tab-pane fade show active" id="pane-campaign" role="tabpanel" aria-labelledby="tab-campaign" tabindex="0">
        <form class="card card-body border-0 shadow-sm" method="post" action="{{ url_for('contracts.contract_create_campaign', contract_id=contract.id) }}">
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label">Name</label>
              <input class="form-control" type="text" name="name" required>
            </div>
            <div class="col-md-6">
              <label class="form-label">Campaign Code</label>
              <input class="form-control" type="text" name="campaign_code" placeholder="optional">
            </div>
            <div class="col-md-4">
              <label class="form-label">Start</label>
              <input class="form-control" type="date" name="start_date">
            </div>
            <div class="col-md-4">
              <label class="form-label">End</label>
              <input class="form-control" type="date" name="end_date">
            </div>
            <div class="col-md-4">
              <label class="form-label">Launch</label>
              <input class="form-control" type="date" name="launch_date">
            </div>
            <div class="col-md-4">
              <label class="form-label">Status</label>
              <input class="form-control" type="text" name="status" placeholder="planned, in-flight, paused, complete">
            </div>
            <div class="col-md-4">
              <label class="form-label">Objective</label>
              <input class="form-control" type="text" name="objective" placeholder="awareness, engagement, ...">
            </div>
            <div class="col-md-4">
              <label class="form-label">KPI Goals (JSON)</label>
              <input class="form-control" type="text" name="kpi_goals" placeholder='{"opens":10000,"clicks":2000}'>
            </div>
            <div class="col-12">
              <label class="form-label">Channel Mix (JSON)</label>
              <input class="form-control" type="text" name="channel_mix" placeholder='{"email":true,"banner":true}'>
            </div>
            <div class="col-12">
              <label class="form-label">Description</label>
              <textarea class="form-control" name="description" rows="3"></textarea>
            </div>
          </div>
          <div class="mt-3">
            <button class="btn btn-primary">Create Campaign</button>
          </div>
        </form>
      </div>

      <!-- Program full form -->
      <div class="tab-pane fade" id="pane-program" role="tabpanel" aria-labelledby="tab-program" tabindex="0">
        <form class="card card-body border-0 shadow-sm" method="post" action="{{ url_for('contracts.contract_create_program', contract_id=contract.id) }}">
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label">Name</label>
              <input class="form-control" type="text" name="name" required>
            </div>
            <div class="col-md-6">
              <label class="form-label">Program Code</label>
              <input class="form-control" type="text" name="program_code" placeholder="optional">
            </div>

            <div class="col-md-6">
              <label class="form-label">Campaign</label>
              <select class="form-select" id="contracts_program_campaign_id" name="campaign_id" required>
                <option value="">Select…</option>
                {% for c in campaigns %}
                <option value="{{ c.id }}">{{ c.name }}</option>
                {% endfor %}
              </select>
              <div class="form-text">Target Lists will filter by this campaign's pharma/brands.</div>
            </div>

            <div class="col-md-6">
              <label class="form-label" style="margin-right: 5px;">Target List</label>
              <input class="form-check-input" type="checkbox" id="contracts_program_show_all_tls">
              <label class="form-check-label" for="contracts_program_show_all_tls">Show all</label>
              <div class="d-flex gap-2">
                <select class="form-select" id="contracts_program_target_list_id" name="target_list_id">
                  <option value="">(none)</option>
                </select>
              </div>
            </div>

            <div class="col-md-4">
              <label class="form-label">Start</label>
              <input class="form-control" type="date" name="start_date">
            </div>
            <div class="col-md-4">
              <label class="form-label">End</label>
              <input class="form-control" type="date" name="end_date">
            </div>
            <div class="col-md-4">
              <label class="form-label">Launch</label>
              <input class="form-control" type="date" name="launch_date">
            </div>

            <div class="col-md-4">
              <label class="form-label">Program Type</label>
              <input class="form-control" type="text" name="program_type" placeholder="e.g., Disease Consensus">
            </div>
            <div class="col-md-4">
              <label class="form-label">Content Type</label>
              <input class="form-control" type="text" name="content_type" placeholder="microsite, webinar, ...">
            </div>
            <div class="col-md-4">
              <label class="form-label">Audience Segment</label>
              <input class="form-control" type="text" name="audience_segment" placeholder="Oncologists">
            </div>

            <div class="col-md-6">
              <label class="form-label">Expected Reach</label>
              <input class="form-control" type="number" name="expected_reach">
            </div>
            <div class="col-md-6">
              <label class="form-label">Status</label>
              <input class="form-control" type="text" name="status" placeholder="planned, live, paused, complete">
            </div>
            <div class="col-12">
              <label class="form-label">Notes</label>
              <input class="form-control" type="text" name="notes">
            </div>
          </div>
          <div class="mt-3">
            <button class="btn btn-primary">Create Program</button>
          </div>
        </form>
      </div>

      {% block scripts %}
      {{ super() }}
      <script>
      (function(){
        async function loadFilteredTLs() {
          const selCampaign = document.getElementById('contracts_program_campaign_id');
          const selTL = document.getElementById('contracts_program_target_list_id');
          const showAll = document.getElementById('contracts_program_show_all_tls').checked;

          const params = new URLSearchParams();
          if (showAll) {
            params.set('all', '1');
          } else if (selCampaign && selCampaign.value) {
            params.set('campaign_id', selCampaign.value);
          } else {
            // no campaign -> empty list
            selTL.innerHTML = '<option value="">(none)</option>';
            return;
          }
          const res = await fetch('/programs/api/target-lists?' + params.toString());
          if (!res.ok) return;
          const data = await res.json();
          selTL.innerHTML = '<option value="">(none)</option>';
          data.forEach(tl => {
            const opt = document.createElement('option');
            opt.value = tl.id;
            opt.textContent = tl.label;
            selTL.appendChild(opt);
          });
        }

        function maybePreselectCampaign() {
          const selCampaign = document.getElementById('contracts_program_campaign_id');
          if (!selCampaign) return;

          // If exactly one campaign is available, preselect it
          const opts = Array.from(selCampaign.options).filter(o => o.value);
          if (opts.length === 1) {
            selCampaign.value = opts[0].value;
          }
        }

        document.getElementById('contracts_program_campaign_id')?.addEventListener('change', loadFilteredTLs);
        document.getElementById('contracts_program_show_all_tls')?.addEventListener('change', loadFilteredTLs);

        // When the tab becomes visible, try preselect + load
        document.getElementById('tab-program')?.addEventListener('shown.bs.tab', () => {
          maybePreselectCampaign();
          loadFilteredTLs();
        });

        // Also run once on page load (in case the tab is already active)
        window.addEventListener('DOMContentLoaded', () => {
          const isActive = document.getElementById('tab-program')?.classList.contains('active');
          if (isActive) {
            maybePreselectCampaign();
            loadFilteredTLs();
          }
        });
      })();
      (function(){
        function wireProgramModal(modalEl) {
          const pid = modalEl.id.replace('editProgModal-','');
          const selCampaign = modalEl.querySelector('#prog_campaign_' + pid);
          const selTL = modalEl.querySelector('#prog_tl_' + pid);
          const showAll = modalEl.querySelector('#prog_show_all_' + pid);

          async function loadTLs() {
            if (!selTL) return;
            const params = new URLSearchParams();
            const currentTL = selTL.getAttribute('data-current') || '';
            if (showAll && showAll.checked) {
              params.set('all', '1');
            } else if (selCampaign && selCampaign.value) {
              params.set('campaign_id', selCampaign.value);
              if (currentTL) params.set('current_tl_id', currentTL);
            } else {
              selTL.innerHTML = '<option value="">(none)</option>';
              return;
            }
            const res = await fetch('/programs/api/target-lists?' + params.toString());
            if (!res.ok) return;
            const data = await res.json();
            selTL.innerHTML = '<option value="">(none)</option>';
            data.forEach(tl => {
              const opt = document.createElement('option');
              opt.value = tl.id;
              opt.textContent = tl.label;
              if (currentTL && String(tl.id) === String(currentTL)) opt.selected = true;
              selTL.appendChild(opt);
            });
          }

          selCampaign && selCampaign.addEventListener('change', loadTLs);
          showAll && showAll.addEventListener('change', loadTLs);
          modalEl.addEventListener('shown.bs.modal', loadTLs);
        }

        window.addEventListener('DOMContentLoaded', () => {
          document.querySelectorAll('[id^="editProgModal-"]').forEach(wireProgramModal);
        });
      })();
      </script>
      {% endblock %}

      <!-- Placement full form -->
      <div class="tab-pane fade" id="pane-placement" role="tabpanel" aria-labelledby="tab-placement" tabindex="0">
        <form class="card card-body border-0 shadow-sm" method="post" action="{{ url_for('contracts.contract_create_placement', contract_id=contract.id) }}">
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label">Name</label>
              <input class="form-control" type="text" name="name" required>
            </div>
            <div class="col-md-6">
              <label class="form-label">Placement Code</label>
              <input class="form-control" type="text" name="placement_code" placeholder="optional">
            </div>
            <div class="col-md-6">
              <label class="form-label">Programs (multi-select)</label>
              <select class="form-select" name="program_ids" multiple size="6" required>
                {% for p in all_programs %}
                <option value="{{ p.id }}">{{ p.name }} ({{ p.campaign.name }})</option>
                {% endfor %}
              </select>
              <div class="form-text">Hold Ctrl/⌘ to select multiple.</div>
            </div>
            <div class="col-md-6">
              <label class="form-label">Channel</label>
              <input class="form-control" type="text" name="channel" placeholder="email, web, app">
            </div>
            <div class="col-md-4">
              <label class="form-label">Status</label>
              <input class="form-control" type="text" name="status" placeholder="planned, live, paused, completed">
            </div>
            <div class="col-md-4">
              <label class="form-label">Format</label>
              <input class="form-control" type="text" name="format" placeholder="HTML banner, native, ...">
            </div>
            <div class="col-md-4">
              <label class="form-label">Ad Server</label>
              <input class="form-control" type="text" name="ad_server" placeholder="AdButler, Veeva, ...">
            </div>
            <div class="col-md-4">
              <label class="form-label">Frequency Cap</label>
              <input class="form-control" type="number" name="frequency_cap">
            </div>
            <div class="col-md-4">
              <label class="form-label">Impression Goal</label>
              <input class="form-control" type="number" name="impression_goal">
            </div>
            <div class="col-md-4">
              <label class="form-label">Click Goal</label>
              <input class="form-control" type="number" name="click_goal">
            </div>
            <div class="col-md-6">
              <label class="form-label">Start</label>
              <input class="form-control" type="date" name="start_date">
            </div>
            <div class="col-md-6">
              <label class="form-label">End</label>
              <input class="form-control" type="date" name="end_date">
            </div>
          </div>
          <div class="mt-3">
            <button class="btn btn-primary">Create Placement</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}